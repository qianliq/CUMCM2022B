# 两个极坐标点和对顶角确定的轨迹方程（完整形式）

根据您的要求，我将所有参数合并到一个大括号内，形成完整的分段方程：

$$
\boxed{
\begin{cases}
\begin{aligned}
& \left(x - \left(\frac{r_1\cos\theta_1 + r_2\cos\theta_2}{2} - \frac{|\cot\alpha|}{2}(r_2\sin\theta_2 - r_1\sin\theta_1)\right)\right)^2 \\
+ & \left(y - \left(\frac{r_1\sin\theta_1 + r_2\sin\theta_2}{2} + \frac{|\cot\alpha|}{2}(r_2\cos\theta_2 - r_1\cos\theta_1)\right)\right)^2 \\
= & \frac{(r_2\cos\theta_2 - r_1\cos\theta_1)^2 + (r_2\sin\theta_2 - r_1\sin\theta_1)^2}{4\sin^2\alpha}
\end{aligned}
& \text{if } \left[(x - r_1\cos\theta_1)(r_2\sin\theta_2 - r_1\sin\theta_1) - (y - r_1\sin\theta_1)(r_2\cos\theta_2 - r_1\cos\theta_1)\right]\cos\alpha > 0 \\
\\
\begin{aligned}
& \left(x - \left(\frac{r_1\cos\theta_1 + r_2\cos\theta_2}{2} + \frac{|\cot\alpha|}{2}(r_2\sin\theta_2 - r_1\sin\theta_1)\right)\right)^2 \\
+ & \left(y - \left(\frac{r_1\sin\theta_1 + r_2\sin\theta_2}{2} - \frac{|\cot\alpha|}{2}(r_2\cos\theta_2 - r_1\cos\theta_1)\right)\right)^2 \\
= & \frac{(r_2\cos\theta_2 - r_1\cos\theta_1)^2 + (r_2\sin\theta_2 - r_1\sin\theta_1)^2}{4\sin^2\alpha}
\end{aligned}
& \text{if } \left[(x - r_1\cos\theta_1)(r_2\sin\theta_2 - r_1\sin\theta_1) - (y - r_1\sin\theta_1)(r_2\cos\theta_2 - r_1\cos\theta_1)\right]\cos\alpha < 0
\end{cases}
}
$$

## 方程说明

- **当 $\alpha < 90^\circ$ 时**：取两个圆的**优弧**部分（即满足条件 $D \cdot \cos\alpha > 0$ 的部分）
- **当 $\alpha > 90^\circ$ 时**：取两个圆的**劣弧**部分（即满足条件 $D \cdot \cos\alpha < 0$ 的部分）

其中：
- $D = (x - r_1\cos\theta_1)(r_2\sin\theta_2 - r_1\sin\theta_1) - (y - r_1\sin\theta_1)(r_2\cos\theta_2 - r_1\cos\theta_1)$
- $|\cot\alpha| = \left|\frac{\cos\alpha}{\sin\alpha}\right|$
- 分母 $4\sin^2\alpha$ 确保了半径计算的正确性

这个方程精确描述了所有从这些点看弦的视角恰好为 $\alpha$ 的点的轨迹，且只包含您指定的弧段（优弧或劣弧）。


第一题用三次这个方程，确定一个交点，计算出目标点的坐标




结果


=== Detailed Results (Polar Coordinates) ===
Aircraft Base            True            Calculated      Dist Err   Angle Err 
         (r,θ°)          (r,θ°)          (r,θ°)          (m)        (°)       
-------------------------------------------------------------------------------------
FY01     (100.0,  0.0°) (97.49, 1.80°) (97.50, 1.81°) 0.02       0.01      °
FY02     (100.0, 40.0°) (104.64,40.39°) (104.65,40.39°) 0.01       0.00      °
FY03     (100.0, 80.0°) (93.12,78.62°) (93.07,78.70°) 0.13       0.07      °
FY04     (100.0,120.0°) (91.16,121.46°) (91.15,121.51°) 0.07       0.04      °
FY05     (100.0,160.0°) (102.02,160.83°) (101.98,160.85°) 0.05       0.03      °
FY06     (100.0,200.0°) (90.41,-158.12°) (90.42,-158.12°) 0.01       0.00      °
FY07     (100.0,240.0°) (106.65,-121.15°) (106.60,-121.16°) 0.05       0.03      °
FY08     (100.0,280.0°) (93.64,-81.27°) (93.61,-81.32°) 0.09       0.05      °
FY09     (100.0,320.0°) (96.08,-39.90°) (96.03,-39.98°) 0.15       0.08      °

# 现在的做法：

使用上面三个方程画出三个圆弧

然后每个接收机都有自己的编号，根据编号可以得到唯一的正确位置，从正确位置开始，按一定步长往外画圈，圈上一定步长的每个点，判断其到三个圆弧的距离，画了一定数量得到的结果后，从中取各个极小值，从小到大排序，剔除明显出错的最小值点，得出其坐标


结果展示

=== Statistical Results ===
Number of test aircraft: 9
Average distance error: 0.06
Average angle error: 0.04°

=== Detailed Results (Polar Coordinates) ===
Aircraft Base            True            Calculated      Dist Err   Angle Err 
         (r,θ°)          (r,θ°)          (r,θ°)          (m)        (°)       
-------------------------------------------------------------------------------------
FY01     (100.0,  0.0°) (97.49, 1.80°) (97.50, 1.81°) 0.02       0.01      °
FY02     (100.0, 40.0°) (104.64,40.39°) (104.65,40.39°) 0.01       0.00      °
FY03     (100.0, 80.0°) (93.12,78.62°) (93.07,78.70°) 0.13       0.07      °
FY04     (100.0,120.0°) (91.16,121.46°) (91.15,121.51°) 0.07       0.04      °
FY05     (100.0,160.0°) (102.02,160.83°) (101.98,160.85°) 0.05       0.03      °
FY06     (100.0,200.0°) (90.41,-158.12°) (90.42,-158.12°) 0.01       0.00      °
FY07     (100.0,240.0°) (106.65,-121.15°) (106.60,-121.16°) 0.05       0.03      °
FY08     (100.0,280.0°) (93.64,-81.27°) (93.61,-81.32°) 0.09       0.05      °
FY09     (100.0,320.0°) (96.08,-39.90°) (96.03,-39.98°) 0.15       0.08      °

=== Error Range ===
Distance error range: 0.01 - 0.15 m
Angle error range: 0.00° - 0.08°