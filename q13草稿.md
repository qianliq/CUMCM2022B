# 问题1(3) 无人机编队调整算法

## 算法思路：迭代 + 贪心优化

### 核心思想
采用迭代优化的方法，每次选择最优的发射机组合来调整无人机位置，直到编队收敛到理想的圆形排列。

### 算法步骤

#### 1. 初始化
- 读取表1中的10架无人机初始位置（极坐标）
- 转换为直角坐标系便于计算
- 设定算法参数：最大迭代次数、收敛阈值、位置调整步长

#### 2. 迭代优化过程

每次迭代包含以下步骤：

**2.1 计算当前理想圆半径**
- 计算所有周边无人机（FY01-FY09）到圆心（FY00）的距离
- 取平均值作为当前理想圆半径

**2.2 贪心搜索最优发射机组合**
- 尝试所有可能的发射机组合：
  - FY00 + 1架周边无人机
  - FY00 + 2架周边无人机  
  - FY00 + 3架周边无人机
- 对每种组合进行模拟调整，计算调整后的总误差
- 选择使总误差最小的组合

**2.3 位置定位与调整**
对每个接收机（非发射机）进行：
- 测量角度信息：计算接收机与发射机之间的夹角
- 基于角度信息进行三边测量定位
- 渐进式位置调整：避免过大的移动导致震荡
- 圆形约束：将无人机拉向理想圆周

**2.4 收敛判断**
- 计算当前所有无人机到理想位置的总误差
- 如果误差小于阈值或达到最大迭代次数，则停止

#### 3. 关键技术细节

**3.1 角度测量**
- 基于当前实际位置计算角度信息
- 主要使用FY00与其他发射机形成的夹角

**3.2 改进的定位算法**
```python
def locate_drone_trilateration(receiver_pos, transmitter_positions, measured_angles):
    # 使用正弦定理和几何约束
    # 结合多个角度信息的加权平均
    # 限制结果在合理范围内
```

**3.3 双重调整策略**
```python
# 1. 基于角度定位的调整
new_pos = locate_drone_trilateration(...)
temp_positions[receiver_idx] = adjust_position_gradually(current_pos, new_pos, step_factor)

# 2. 圆形约束调整
ideal_pos_on_circle = center + direction * ideal_radius
temp_positions[receiver_idx] = adjust_position_gradually(current_pos, ideal_pos_on_circle, step_factor * 0.5)
```

### 算法优势

1. **贪心策略**：每次选择最优发射机组合，提高收敛效率
2. **动态半径**：根据当前位置动态计算理想圆半径，适应性强
3. **渐进调整**：避免大幅度移动导致的系统震荡
4. **多组合尝试**：考虑1-3架发射机的所有组合，提高鲁棒性
5. **双重约束**：角度定位 + 圆形约束，确保收敛到理想圆形

### 实验结果

通过该算法，无人机编队能够在15次迭代内收敛到理想的圆形编队：

**收敛过程：**
- 第1次迭代：总误差 33.75m → 平均误差 3.75m
- 第5次迭代：总误差 7.51m → 平均误差 0.83m  
- 第10次迭代：总误差 2.87m → 平均误差 0.32m
- 第15次迭代：总误差 2.74m → 平均误差 0.30m

**最终结果：**
- 最终理想圆半径：111.89m
- 平均位置误差：0.302m
- 最大位置误差：0.658m（FY04）

**各无人机调整情况：**
- FY01: 100.00m → 111.93m (误差 0.035m)
- FY02: 98.00m → 111.93m (误差 0.198m)  
- FY03: 112.00m → 112.00m (误差 0.424m)
- FY04: 105.00m → 111.45m (误差 0.658m)
- FY05: 98.00m → 111.93m (误差 0.276m)
- FY06: 112.00m → 111.95m (误差 0.094m)
- FY07: 105.00m → 111.93m (误差 0.142m)
- FY08: 98.00m → 111.93m (误差 0.334m)
- FY09: 112.00m → 112.00m (误差 0.557m)

**最优发射机组合演变：**
- 前8次迭代：FY00 + FY03 + FY06 + FY09
- 后7次迭代：FY00 + FY03 + FY04 + FY09

### 算法分析

1. **收敛性**：算法表现出良好的收敛性，误差持续下降
2. **稳定性**：后期发射机组合保持稳定，说明找到了局部最优解
3. **精度**：最终平均误差约30cm，满足工程实际需求
4. **适应性**：能够自动调整理想圆半径，适应初始偏差

### 可视化输出

程序提供4个子图的可视化：
1. 初始无人机位置分布
2. 调整后的最终位置分布  
3. 误差收敛曲线
4. 各无人机的位置误差柱状图

本题假设飞机是通过极坐标进行移动的

也就是说，每个飞机的两个自由度分别是半径和角度
